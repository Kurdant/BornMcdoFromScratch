name: Deploy to VPS

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to VPS via Docker
      env:
        VPS_HOST: ${{ secrets.VPS_HOST }}
        VPS_USER: ${{ secrets.VPS_USER }}
        VPS_KEY: ${{ secrets.VPS_SSH_KEY }}
      run: |
        echo "ðŸš€ Deploying to VPS..."
        echo "Vous devez ajouter les secrets GitHub:"
        echo "- VPS_HOST: IP ou domaine du VPS"
        echo "- VPS_USER: utilisateur SSH"
        echo "- VPS_SSH_KEY: clÃ© privÃ©e SSH"
        
    - name: Build Docker image
      run: docker build -t wcdo-backend:latest .
      
    - name: Push to Docker registry (optionnel)
      run: echo "Configuration Docker registry si nÃ©cessaire"
